<!DOCTYPE html>
<html><head>
  <title>Computer Setup Script</title>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../../css/theme.css"/>
  <link rel="stylesheet" href="../../../css/syntax.css"/>

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-56296045-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  <meta property="og:title" content="Computer Setup Script" />
<meta property="og:description" content="Putting things in scripts makes it easy to get up and running quickly. Devops isn&rsquo;t just for servers or Dockerfiles, you can also use it for your own environment. This is the script that I use to get my Chromebooks up and running after a wipe and how I get a new Linux machine up an running. Lets use the bash boilerplate to write our script.
I&rsquo;ll update this later to include OSX." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://willschenk.com/articles/2019/computer_setup_script/" />
<meta property="article:published_time" content="2019-12-10T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-12-10T00:00:00+00:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Computer Setup Script"/>
<meta name="twitter:description" content="Putting things in scripts makes it easy to get up and running quickly. Devops isn&rsquo;t just for servers or Dockerfiles, you can also use it for your own environment. This is the script that I use to get my Chromebooks up and running after a wipe and how I get a new Linux machine up an running. Lets use the bash boilerplate to write our script.
I&rsquo;ll update this later to include OSX."/>
<meta name="twitter:site" content="@wschenk"/>


  <style>
    .article p, .article ul, .article ol, .article table {
      max-width: 45em;
    }

    article.article p:first-child, .article blockquote {
      font-size: 1.25em;
      font-weight: 300;
      max-width: 36em;  
    }
  </style>
</head>
<body><nav class="container my-5">
  <h1 class="pt-md-5 display-3"><a class="text-dark" href="../../../">Will Schenk</a></h1>
  <p>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../articles/" title="">Articles</a>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../contact" title="">Contact</a>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../tags/" title="">Tags</a>
    
    <a href="../../../feed.xml" class="mr-3 h4 text-light"><img src="../../../img/rss.svg" alt="rss" height="20" width="20"/></a>
    
      <a href="https://twitter.com/@wschenk" class="mr-3 h4 text-light"><img src="../../../img/twitter.svg" alt="twitter" height="20" width="20"/></a>
    
    
      <a href="https://instagram.com/wschenk" class="mr-3 h4 text-light"><img src="../../../img/instagram.svg" alt="instagram" height="20" width="20"/></a>
    
    
      <a href="https://github.com/wschenk" class="mr-3 h4 text-light"><img src="../../../img/github.svg" alt="github" height="20" width="20"/></a>
    
    
      <a href="https://linkedin.com/in/will-schenk-420266" class="mr-3 h4 text-light"><img src="../../../img/linkedin.svg" alt="linkedin" height="20" width="20"/></a>
    
  </p>
</nav>

<div class="container">
  <h1 class="mt-5">Computer Setup Script</h1>

  
    <h2 class="font-weight-light font-italic mb-3">Setup Linux or Chromebook quickly</h2>
  

  <p class="text-muted mt-3">
    <a class="text-muted" href="https://willschenk.com/articles/2019/computer_setup_script/">Published December 10, 2019</a>

    
      <a class="text-muted" href="../../../tags/howto">#howto</a>
    
      <a class="text-muted" href="../../../tags/linux">#linux</a>
    
      <a class="text-muted" href="../../../tags/osx">#osx</a>
    
      <a class="text-muted" href="../../../tags/automation">#automation</a>
    
      <a class="text-muted" href="../../../tags/bash-boilerplate">#bash boilerplate</a>
    
      <a class="text-muted" href="../../../tags/chromebook">#chromebook</a>
    
  </p>

  

  

  <article class="article mt-5">
    

<p>Putting things in scripts makes it easy to get up and running quickly.  Devops isn&rsquo;t just for servers or <code>Dockerfile</code>s, you can also use it for your own environment.  This is the script that I use to get my Chromebooks up and running after a wipe and how I get a new Linux machine up an running.  Lets use the <a href="https://bash3boilerplate.sh/">bash boilerplate</a> to write our script.</p>

<p>I&rsquo;ll update this later to include OSX.</p>

<h2 id="the-strategy">The strategy</h2>

<ol>
<li>Awesome boilerplate code to make things easier</li>
<li>Install gcc and git if needed</li>
<li>Setup git username and email</li>
<li>Setup .ssh keys (assuming you are copying from a secure store)</li>
<li><code>not_installed</code> function, which looks to see if a command is installed and returns true if the user wants to install it.</li>
<li><code>not_installed_forced</code> function, which always will install when we need these things.</li>
<li><code>update_check</code> which will call <code>apt-get update</code> no more than once a session</li>
<li><code>install_application</code> which will install the package</li>
<li><code>install_</code><em>name</em> which contains specific instructions for custom packages.</li>
<li>A couple of things &ndash; <code>rbenv</code>, <code>nvm</code>, etc mess with the environment.  For these we set the <code>RESET_TERMINAL</code> flag to true and leave the user with the nice warning.</li>
</ol>

<h2 id="the-packages">The packages</h2>

<p>Here&rsquo;s a table of what is installed.</p>

<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>emacs</td>
<td>Amongst other things, an editor of files</td>
</tr>

<tr>
<td>tmux</td>
<td>Screen multiplexor</td>
</tr>

<tr>
<td>jq</td>
<td>Command line JSON parsing</td>
</tr>

<tr>
<td>ag</td>
<td>Fast file searching</td>
</tr>

<tr>
<td>docker</td>
<td>Container builder and runner</td>
</tr>

<tr>
<td>nvm</td>
<td>Node version manager</td>
</tr>

<tr>
<td>rbenv</td>
<td>Ruby version manager</td>
</tr>

<tr>
<td>go</td>
<td>Golang compiler</td>
</tr>

<tr>
<td>hugo</td>
<td>Static site builder, built from source</td>
</tr>

<tr>
<td>heroku</td>
<td>Heroku toolbelt</td>
</tr>

<tr>
<td>terraform</td>
<td>Terraform cloud infrastructure provisioner</td>
</tr>

<tr>
<td>packer</td>
<td>Image builder</td>
</tr>

<tr>
<td>ansible</td>
<td>Provisioner</td>
</tr>

<tr>
<td>atom</td>
<td>Atom text editor</td>
</tr>

<tr>
<td>gcloud</td>
<td>Google Cloud CLI</td>
</tr>
</tbody>
</table>

<h2 id="how-to-run">How to run</h2>

<p>This file is mirrored at <a href="https://willschenk.com/bootstrap.sh">https://willschenk.com/bootstrap.sh</a> and you can run it with the command:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ wget https://willschenk.com/bootstrap.sh
$ bash bootstrap.sh</code></pre></div>
<p>And you should be good to go!</p>

<h2 id="the-code">The code:</h2>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/usr/bin/env bash
</span><span class="cp"></span>#
<span class="c1"># Based on a template by BASH3 Boilerplate v2.3.0</span>
<span class="c1"># http://bash3boilerplate.sh/#authors</span>
#
<span class="c1"># The MIT License (MIT)</span>
<span class="c1"># Copyright (c) 2013 Kevin van Zonneveld and contributors</span>
<span class="c1"># You are not obligated to bundle the LICENSE file with your b3bp projects as long</span>
<span class="c1"># as you leave these references intact in the header comments of your source files.</span>

<span class="c1"># Exit on error. Append &#34;|| true&#34; if you expect an error.</span>
<span class="nb">set</span> -o errexit
<span class="c1"># Exit on error inside any functions or subshells.</span>
<span class="nb">set</span> -o errtrace
<span class="c1"># Do not allow use of undefined vars. Use ${VAR:-} to use an undefined VAR</span>
<span class="nb">set</span> -o nounset
<span class="c1"># Catch the error in case mysqldump fails (but gzip succeeds) in `mysqldump |gzip`</span>
<span class="nb">set</span> -o pipefail
<span class="c1"># Turn on traces, useful while debugging but commented out by default</span>
<span class="c1"># set -o xtrace</span>

<span class="c1"># Define the environment variables (and their defaults) that this script depends on</span>
<span class="nv">LOG_LEVEL</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOG_LEVEL</span><span class="k">:-</span><span class="nv">6</span><span class="si">}</span><span class="s2">&#34;</span> <span class="c1"># 7 = debug -&gt; 0 = emergency</span>
<span class="nv">NO_COLOR</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">NO_COLOR</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span>    <span class="c1"># true = disable color. otherwise autodetected</span>


<span class="c1">### Functions</span>
<span class="c1">##############################################################################</span>

<span class="k">function</span> __b3bp_log <span class="o">()</span> <span class="o">{</span>
  <span class="nb">local</span> <span class="nv">log_level</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2">&#34;</span>
  <span class="nb">shift</span>

  <span class="c1"># shellcheck disable=SC2034</span>
  <span class="nb">local</span> <span class="nv">color_debug</span><span class="o">=</span><span class="s2">&#34;\x1b[35m&#34;</span>
  <span class="c1"># shellcheck disable=SC2034</span>
  <span class="nb">local</span> <span class="nv">color_info</span><span class="o">=</span><span class="s2">&#34;\x1b[32m&#34;</span>
  <span class="c1"># shellcheck disable=SC2034</span>
  <span class="nb">local</span> <span class="nv">color_notice</span><span class="o">=</span><span class="s2">&#34;\x1b[34m&#34;</span>
  <span class="c1"># shellcheck disable=SC2034</span>
  <span class="nb">local</span> <span class="nv">color_warning</span><span class="o">=</span><span class="s2">&#34;\x1b[33m&#34;</span>
  <span class="c1"># shellcheck disable=SC2034</span>
  <span class="nb">local</span> <span class="nv">color_error</span><span class="o">=</span><span class="s2">&#34;\x1b[31m&#34;</span>
  <span class="c1"># shellcheck disable=SC2034</span>
  <span class="nb">local</span> <span class="nv">color_critical</span><span class="o">=</span><span class="s2">&#34;\x1b[1;31m&#34;</span>
  <span class="c1"># shellcheck disable=SC2034</span>
  <span class="nb">local</span> <span class="nv">color_alert</span><span class="o">=</span><span class="s2">&#34;\x1b[1;33;41m&#34;</span>
  <span class="c1"># shellcheck disable=SC2034</span>
  <span class="nb">local</span> <span class="nv">color_emergency</span><span class="o">=</span><span class="s2">&#34;\x1b[1;4;5;33;41m&#34;</span>

  <span class="nb">local</span> <span class="nv">colorvar</span><span class="o">=</span><span class="s2">&#34;color_</span><span class="si">${</span><span class="nv">log_level</span><span class="si">}</span><span class="s2">&#34;</span>

  <span class="nb">local</span> <span class="nv">color</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="p">!colorvar</span><span class="k">:-</span><span class="si">${</span><span class="nv">color_error</span><span class="si">}}</span><span class="s2">&#34;</span>
  <span class="nb">local</span> <span class="nv">color_reset</span><span class="o">=</span><span class="s2">&#34;\x1b[0m&#34;</span>

  <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">NO_COLOR</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]]</span> <span class="o">||</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">TERM</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;xterm&#34;</span>* <span class="o">]]</span> <span class="o">||</span> <span class="o">[[</span> ! -t <span class="m">2</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">NO_COLOR</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;false&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
      <span class="c1"># Don&#39;t use colors on pipes or non-recognized terminals</span>
      <span class="nv">color</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">;</span> <span class="nv">color_reset</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
    <span class="k">fi</span>
  <span class="k">fi</span>

  <span class="c1"># all remaining arguments are to be printed</span>
  <span class="nb">local</span> <span class="nv">log_line</span><span class="o">=</span><span class="s2">&#34;&#34;</span>

  <span class="k">while</span> <span class="nv">IFS</span><span class="o">=</span><span class="s1">$&#39;\n&#39;</span> <span class="nb">read</span> -r log_line<span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="k">$(</span>date -u +<span class="s2">&#34;%Y-%m-%d %H:%M:%S UTC&#34;</span><span class="k">)</span><span class="s2"> </span><span class="si">${</span><span class="nv">color</span><span class="si">}</span><span class="k">$(</span><span class="nb">printf</span> <span class="s2">&#34;[%9s]&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">log_level</span><span class="si">}</span><span class="s2">&#34;</span><span class="k">)</span><span class="si">${</span><span class="nv">color_reset</span><span class="si">}</span><span class="s2"> </span><span class="si">${</span><span class="nv">log_line</span><span class="si">}</span><span class="s2">&#34;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
  <span class="k">done</span> <span class="o">&lt;&lt;&lt;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="p">@</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span>
<span class="o">}</span>

<span class="k">function</span> emergency <span class="o">()</span> <span class="o">{</span>                                __b3bp_log emergency <span class="s2">&#34;</span><span class="si">${</span><span class="p">@</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="nb">exit</span> <span class="m">1</span><span class="p">;</span> <span class="o">}</span>
<span class="k">function</span> alert <span class="o">()</span>     <span class="o">{</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOG_LEVEL</span><span class="k">:-</span><span class="nv">0</span><span class="si">}</span><span class="s2">&#34;</span> -ge <span class="m">1</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> __b3bp_log alert <span class="s2">&#34;</span><span class="si">${</span><span class="p">@</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> true<span class="p">;</span> <span class="o">}</span>
<span class="k">function</span> critical <span class="o">()</span>  <span class="o">{</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOG_LEVEL</span><span class="k">:-</span><span class="nv">0</span><span class="si">}</span><span class="s2">&#34;</span> -ge <span class="m">2</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> __b3bp_log critical <span class="s2">&#34;</span><span class="si">${</span><span class="p">@</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> true<span class="p">;</span> <span class="o">}</span>
<span class="k">function</span> error <span class="o">()</span>     <span class="o">{</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOG_LEVEL</span><span class="k">:-</span><span class="nv">0</span><span class="si">}</span><span class="s2">&#34;</span> -ge <span class="m">3</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> __b3bp_log error <span class="s2">&#34;</span><span class="si">${</span><span class="p">@</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> true<span class="p">;</span> <span class="o">}</span>
<span class="k">function</span> warning <span class="o">()</span>   <span class="o">{</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOG_LEVEL</span><span class="k">:-</span><span class="nv">0</span><span class="si">}</span><span class="s2">&#34;</span> -ge <span class="m">4</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> __b3bp_log warning <span class="s2">&#34;</span><span class="si">${</span><span class="p">@</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> true<span class="p">;</span> <span class="o">}</span>
<span class="k">function</span> notice <span class="o">()</span>    <span class="o">{</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOG_LEVEL</span><span class="k">:-</span><span class="nv">0</span><span class="si">}</span><span class="s2">&#34;</span> -ge <span class="m">5</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> __b3bp_log notice <span class="s2">&#34;</span><span class="si">${</span><span class="p">@</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> true<span class="p">;</span> <span class="o">}</span>
<span class="k">function</span> info <span class="o">()</span>      <span class="o">{</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOG_LEVEL</span><span class="k">:-</span><span class="nv">0</span><span class="si">}</span><span class="s2">&#34;</span> -ge <span class="m">6</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> __b3bp_log info <span class="s2">&#34;</span><span class="si">${</span><span class="p">@</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> true<span class="p">;</span> <span class="o">}</span>
<span class="k">function</span> debug <span class="o">()</span>     <span class="o">{</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOG_LEVEL</span><span class="k">:-</span><span class="nv">0</span><span class="si">}</span><span class="s2">&#34;</span> -ge <span class="m">7</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> __b3bp_log debug <span class="s2">&#34;</span><span class="si">${</span><span class="p">@</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> true<span class="p">;</span> <span class="o">}</span>

<span class="k">function</span> <span class="nb">help</span> <span class="o">()</span> <span class="o">{</span>
  <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
  <span class="nb">echo</span> <span class="s2">&#34; </span><span class="si">${</span><span class="p">*</span><span class="si">}</span><span class="s2">&#34;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
  <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
  <span class="nb">echo</span> <span class="s2">&#34;  </span><span class="si">${</span><span class="nv">__usage</span><span class="k">:-</span><span class="nv">No</span><span class="p"> usage available</span><span class="si">}</span><span class="s2">&#34;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
  <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>

  <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__helptext</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&#34; </span><span class="si">${</span><span class="nv">__helptext</span><span class="si">}</span><span class="s2">&#34;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
    <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
  <span class="k">fi</span>

  <span class="nb">exit</span> <span class="m">1</span>
<span class="o">}</span>


<span class="c1">### Parse commandline options</span>
<span class="c1">##############################################################################</span>

<span class="c1"># Commandline options. This defines the usage page, and is used to parse cli</span>
<span class="c1"># opts &amp; defaults from. The parsing is unforgiving so be precise in your syntax</span>
<span class="c1"># - A short option must be preset for every long option; but every short option</span>
<span class="c1">#   need not have a long option</span>
<span class="c1"># - `--` is respected as the separator between options and arguments</span>
<span class="c1"># - We do not bash-expand defaults, so setting &#39;~/app&#39; as a default will not resolve to ${HOME}.</span>
<span class="c1">#   you can use bash variables to work around this (so use ${HOME} instead)</span>

<span class="c1"># shellcheck disable=SC2015</span>
<span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__usage</span><span class="p">+x</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]]</span> <span class="o">||</span> <span class="nb">read</span> -r -d <span class="s1">&#39;&#39;</span> __usage <span class="s">&lt;&lt;-&#39;EOF&#39; || true # exits non-zero when EOF</span> encountered
  -v               Enable verbose mode, print script as it is executed
  -d --debug       Enables debug mode
  -h --help        This page
  -n --no-color    Disable color output
  -1 --one         Do just one thing
EOF

<span class="c1"># shellcheck disable=SC2015</span>
<span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__helptext</span><span class="p">+x</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]]</span> <span class="o">||</span> <span class="nb">read</span> -r -d <span class="s1">&#39;&#39;</span> __helptext <span class="s">&lt;&lt;-&#39;EOF&#39; || true # exits non-zero when EOF</span> encountered
 This is Bash3 Boilerplate<span class="s1">&#39;s help text. Feel free to add any description of your
</span><span class="s1"> program or elaborate more on command-line arguments. This section is not
</span><span class="s1"> parsed and will be added as-is to the help.
</span><span class="s1">EOF
</span><span class="s1">
</span><span class="s1"># Translate usage string -&gt; getopts arguments, and set $arg_&lt;flag&gt; defaults
</span><span class="s1">while read -r __b3bp_tmp_line; do
</span><span class="s1">  if [[ &#34;${__b3bp_tmp_line}&#34; =~ ^- ]]; then
</span><span class="s1">    # fetch single character version of option string
</span><span class="s1">    __b3bp_tmp_opt=&#34;${__b3bp_tmp_line%% *}&#34;
</span><span class="s1">    __b3bp_tmp_opt=&#34;${__b3bp_tmp_opt:1}&#34;
</span><span class="s1">
</span><span class="s1">    # fetch long version if present
</span><span class="s1">    __b3bp_tmp_long_opt=&#34;&#34;
</span><span class="s1">
</span><span class="s1">    if [[ &#34;${__b3bp_tmp_line}&#34; = *&#34;--&#34;* ]]; then
</span><span class="s1">      __b3bp_tmp_long_opt=&#34;${__b3bp_tmp_line#*--}&#34;
</span><span class="s1">      __b3bp_tmp_long_opt=&#34;${__b3bp_tmp_long_opt%% *}&#34;
</span><span class="s1">    fi
</span><span class="s1">
</span><span class="s1">    # map opt long name to+from opt short name
</span><span class="s1">    printf -v &#34;__b3bp_tmp_opt_long2short_${__b3bp_tmp_long_opt//-/_}&#34; &#39;</span>%s<span class="s1">&#39; &#34;${__b3bp_tmp_opt}&#34;
</span><span class="s1">    printf -v &#34;__b3bp_tmp_opt_short2long_${__b3bp_tmp_opt}&#34; &#39;</span>%s<span class="s1">&#39; &#34;${__b3bp_tmp_long_opt//-/_}&#34;
</span><span class="s1">
</span><span class="s1">    # check if option takes an argument
</span><span class="s1">    if [[ &#34;${__b3bp_tmp_line}&#34; =~ \[.*\] ]]; then
</span><span class="s1">      __b3bp_tmp_opt=&#34;${__b3bp_tmp_opt}:&#34; # add : if opt has arg
</span><span class="s1">      __b3bp_tmp_init=&#34;&#34;  # it has an arg. init with &#34;&#34;
</span><span class="s1">      printf -v &#34;__b3bp_tmp_has_arg_${__b3bp_tmp_opt:0:1}&#34; &#39;</span>%s<span class="s1">&#39; &#34;1&#34;
</span><span class="s1">    elif [[ &#34;${__b3bp_tmp_line}&#34; =~ \{.*\} ]]; then
</span><span class="s1">      __b3bp_tmp_opt=&#34;${__b3bp_tmp_opt}:&#34; # add : if opt has arg
</span><span class="s1">      __b3bp_tmp_init=&#34;&#34;  # it has an arg. init with &#34;&#34;
</span><span class="s1">      # remember that this option requires an argument
</span><span class="s1">      printf -v &#34;__b3bp_tmp_has_arg_${__b3bp_tmp_opt:0:1}&#34; &#39;</span>%s<span class="s1">&#39; &#34;2&#34;
</span><span class="s1">    else
</span><span class="s1">      __b3bp_tmp_init=&#34;0&#34; # it&#39;</span>s a flag. init with <span class="m">0</span>
      <span class="nb">printf</span> -v <span class="s2">&#34;__b3bp_tmp_has_arg_</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">1</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s1">&#39;%s&#39;</span> <span class="s2">&#34;0&#34;</span>
    <span class="k">fi</span>
    <span class="nv">__b3bp_tmp_opts</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_opts</span><span class="k">:-</span><span class="si">}${</span><span class="nv">__b3bp_tmp_opt</span><span class="si">}</span><span class="s2">&#34;</span>
  <span class="k">fi</span>

  <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]]</span> <span class="o">||</span> <span class="k">continue</span>

  <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_line</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span>~ <span class="o">(</span>^<span class="p">|</span><span class="se">\.\ </span>*<span class="o">)</span><span class="nv">Default</span><span class="o">=</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="c1"># ignore default value if option does not have an argument</span>
    <span class="nv">__b3bp_tmp_varname</span><span class="o">=</span><span class="s2">&#34;__b3bp_tmp_has_arg_</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">1</span><span class="si">}</span><span class="s2">&#34;</span>

    <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="p">!__b3bp_tmp_varname</span><span class="si">}</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;0&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
      <span class="nv">__b3bp_tmp_init</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_line</span><span class="p">##*Default=</span><span class="si">}</span><span class="s2">&#34;</span>
      <span class="nv">__b3bp_tmp_re</span><span class="o">=</span><span class="s1">&#39;^&#34;(.*)&#34;$&#39;</span>
      <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_init</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span>~ <span class="si">${</span><span class="nv">__b3bp_tmp_re</span><span class="si">}</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nv">__b3bp_tmp_init</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">BASH_REMATCH</span><span class="p">[1]</span><span class="si">}</span><span class="s2">&#34;</span>
      <span class="k">else</span>
        <span class="nv">__b3bp_tmp_re</span><span class="o">=</span><span class="s2">&#34;^&#39;(.*)&#39;</span>$<span class="s2">&#34;</span>
        <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_init</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span>~ <span class="si">${</span><span class="nv">__b3bp_tmp_re</span><span class="si">}</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
          <span class="nv">__b3bp_tmp_init</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">BASH_REMATCH</span><span class="p">[1]</span><span class="si">}</span><span class="s2">&#34;</span>
        <span class="k">fi</span>
      <span class="k">fi</span>
    <span class="k">fi</span>
  <span class="k">fi</span>

  <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_line</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span>~ <span class="o">(</span>^<span class="p">|</span><span class="se">\.\ </span>*<span class="o">)</span>Required<span class="se">\.</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="c1"># remember that this option requires an argument</span>
    <span class="nb">printf</span> -v <span class="s2">&#34;__b3bp_tmp_has_arg_</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">1</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s1">&#39;%s&#39;</span> <span class="s2">&#34;2&#34;</span>
  <span class="k">fi</span>

  <span class="nb">printf</span> -v <span class="s2">&#34;arg_</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">1</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s1">&#39;%s&#39;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_init</span><span class="si">}</span><span class="s2">&#34;</span>
<span class="k">done</span> <span class="o">&lt;&lt;&lt;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__usage</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span>

<span class="c1"># run getopts only if options were specified in __usage</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_opts</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="c1"># Allow long options like --this</span>
  <span class="nv">__b3bp_tmp_opts</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_opts</span><span class="si">}</span><span class="s2">-:&#34;</span>

  <span class="c1"># Reset in case getopts has been used previously in the shell.</span>
  <span class="nv">OPTIND</span><span class="o">=</span><span class="m">1</span>

  <span class="c1"># start parsing command line</span>
  <span class="nb">set</span> +o nounset <span class="c1"># unexpected arguments will cause unbound variables</span>
                 <span class="c1"># to be dereferenced</span>
  <span class="c1"># Overwrite $arg_&lt;flag&gt; defaults with the actual CLI options</span>
  <span class="k">while</span> <span class="nb">getopts</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_opts</span><span class="si">}</span><span class="s2">&#34;</span> __b3bp_tmp_opt<span class="p">;</span> <span class="k">do</span>
    <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;?&#34;</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">help</span> <span class="s2">&#34;Invalid use of script: </span><span class="si">${</span><span class="p">*</span><span class="si">}</span><span class="s2"> &#34;</span>

    <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;-&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
      <span class="c1"># OPTARG is long-option-name or long-option=value</span>
      <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">OPTARG</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span>~ .*<span class="o">=</span>.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
        <span class="c1"># --key=value format</span>
        <span class="nv">__b3bp_tmp_long_opt</span><span class="o">=</span><span class="si">${</span><span class="nv">OPTARG</span><span class="p">/=*/</span><span class="si">}</span>
        <span class="c1"># Set opt to the short option corresponding to the long option</span>
        <span class="nv">__b3bp_tmp_varname</span><span class="o">=</span><span class="s2">&#34;__b3bp_tmp_opt_long2short_</span><span class="si">${</span><span class="nv">__b3bp_tmp_long_opt</span><span class="p">//-/_</span><span class="si">}</span><span class="s2">&#34;</span>
        <span class="nb">printf</span> -v <span class="s2">&#34;__b3bp_tmp_opt&#34;</span> <span class="s1">&#39;%s&#39;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="p">!__b3bp_tmp_varname</span><span class="si">}</span><span class="s2">&#34;</span>
        <span class="nv">OPTARG</span><span class="o">=</span><span class="si">${</span><span class="nv">OPTARG</span><span class="p">#*=</span><span class="si">}</span>
      <span class="k">else</span>
        <span class="c1"># --key value format</span>
        <span class="c1"># Map long name to short version of option</span>
        <span class="nv">__b3bp_tmp_varname</span><span class="o">=</span><span class="s2">&#34;__b3bp_tmp_opt_long2short_</span><span class="si">${</span><span class="nv">OPTARG</span><span class="p">//-/_</span><span class="si">}</span><span class="s2">&#34;</span>
        <span class="nb">printf</span> -v <span class="s2">&#34;__b3bp_tmp_opt&#34;</span> <span class="s1">&#39;%s&#39;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="p">!__b3bp_tmp_varname</span><span class="si">}</span><span class="s2">&#34;</span>
        <span class="c1"># Only assign OPTARG if option takes an argument</span>
        <span class="nv">__b3bp_tmp_varname</span><span class="o">=</span><span class="s2">&#34;__b3bp_tmp_has_arg_</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt</span><span class="si">}</span><span class="s2">&#34;</span>
        <span class="nb">printf</span> -v <span class="s2">&#34;OPTARG&#34;</span> <span class="s1">&#39;%s&#39;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="p">@:</span><span class="nv">OPTIND</span><span class="p">:</span><span class="si">${</span><span class="p">!__b3bp_tmp_varname</span><span class="si">}}</span><span class="s2">&#34;</span>
        <span class="c1"># shift over the argument if argument is expected</span>
        <span class="o">((</span><span class="nv">OPTIND</span><span class="o">+=</span>__b3bp_tmp_has_arg_<span class="si">${</span><span class="nv">__b3bp_tmp_opt</span><span class="si">}</span><span class="o">))</span>
      <span class="k">fi</span>
      <span class="c1"># we have set opt/OPTARG to the short value and the argument as OPTARG if it exists</span>
    <span class="k">fi</span>
    <span class="nv">__b3bp_tmp_varname</span><span class="o">=</span><span class="s2">&#34;arg_</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">1</span><span class="si">}</span><span class="s2">&#34;</span>
    <span class="nv">__b3bp_tmp_default</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="p">!__b3bp_tmp_varname</span><span class="si">}</span><span class="s2">&#34;</span>

    <span class="nv">__b3bp_tmp_value</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">OPTARG</span><span class="si">}</span><span class="s2">&#34;</span>
    <span class="k">if</span> <span class="o">[[</span> -z <span class="s2">&#34;</span><span class="si">${</span><span class="nv">OPTARG</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_default</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;0&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
      <span class="nv">__b3bp_tmp_value</span><span class="o">=</span><span class="s2">&#34;1&#34;</span>
    <span class="k">fi</span>

    <span class="nb">printf</span> -v <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_varname</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s1">&#39;%s&#39;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_value</span><span class="si">}</span><span class="s2">&#34;</span>
    debug <span class="s2">&#34;cli arg </span><span class="si">${</span><span class="nv">__b3bp_tmp_varname</span><span class="si">}</span><span class="s2"> = (</span><span class="si">${</span><span class="nv">__b3bp_tmp_default</span><span class="si">}</span><span class="s2">) -&gt; </span><span class="si">${</span><span class="p">!__b3bp_tmp_varname</span><span class="si">}</span><span class="s2">&#34;</span>
  <span class="k">done</span>
  <span class="nb">set</span> -o nounset <span class="c1"># no more unbound variable references expected</span>

  <span class="nb">shift</span> <span class="k">$((</span>OPTIND-1<span class="k">))</span>

  <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;--&#34;</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
    <span class="nb">shift</span>
  <span class="k">fi</span>
<span class="k">fi</span>


<span class="c1">### Automatic validation of required option arguments</span>
<span class="c1">##############################################################################</span>

<span class="k">for</span> __b3bp_tmp_varname in <span class="si">${</span><span class="p">!__b3bp_tmp_has_arg_*</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>
  <span class="c1"># validate only options which required an argument</span>
  <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="p">!__b3bp_tmp_varname</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;2&#34;</span> <span class="o">]]</span> <span class="o">||</span> <span class="k">continue</span>

  <span class="nv">__b3bp_tmp_opt_short</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_varname</span><span class="p">##*_</span><span class="si">}</span><span class="s2">&#34;</span>
  <span class="nv">__b3bp_tmp_varname</span><span class="o">=</span><span class="s2">&#34;arg_</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt_short</span><span class="si">}</span><span class="s2">&#34;</span>
  <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="p">!__b3bp_tmp_varname</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="k">continue</span>

  <span class="nv">__b3bp_tmp_varname</span><span class="o">=</span><span class="s2">&#34;__b3bp_tmp_opt_short2long_</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt_short</span><span class="si">}</span><span class="s2">&#34;</span>
  <span class="nb">printf</span> -v <span class="s2">&#34;__b3bp_tmp_opt_long&#34;</span> <span class="s1">&#39;%s&#39;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="p">!__b3bp_tmp_varname</span><span class="si">}</span><span class="s2">&#34;</span>
  <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt_long</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nv">__b3bp_tmp_opt_long</span><span class="o">=</span><span class="s2">&#34; (--</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt_long</span><span class="p">//_/-</span><span class="si">}</span><span class="s2">)&#34;</span>

  <span class="nb">help</span> <span class="s2">&#34;Option -</span><span class="si">${</span><span class="nv">__b3bp_tmp_opt_short</span><span class="si">}${</span><span class="nv">__b3bp_tmp_opt_long</span><span class="k">:-</span><span class="si">}</span><span class="s2"> requires an argument&#34;</span>
<span class="k">done</span>


<span class="c1">### Cleanup Environment variables</span>
<span class="c1">##############################################################################</span>

<span class="k">for</span> __tmp_varname in <span class="si">${</span><span class="p">!__b3bp_tmp_*</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>
  <span class="nb">unset</span> -v <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__tmp_varname</span><span class="si">}</span><span class="s2">&#34;</span>
<span class="k">done</span>

<span class="nb">unset</span> -v __tmp_varname


<span class="c1">### Externally supplied __usage. Nothing else to do here</span>
<span class="c1">##############################################################################</span>

<span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">__b3bp_external_usage</span><span class="k">:-</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">unset</span> -v __b3bp_external_usage
  <span class="k">return</span>
<span class="k">fi</span>


<span class="c1">### Signal trapping and backtracing</span>
<span class="c1">##############################################################################</span>

<span class="nv">RESET_TERMINAL</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
<span class="k">function</span> __b3bp_cleanup_before_exit <span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="nb">test</span> -z <span class="s2">&#34;</span><span class="nv">$RESET_TERMINAL</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">then</span>
    info Script finished
    <span class="k">else</span>
    warning <span class="s2">&#34;Environment variables have been reset, please logout and log back in&#34;</span>
    <span class="k">fi</span>
<span class="o">}</span>
<span class="nb">trap</span> __b3bp_cleanup_before_exit EXIT

<span class="c1"># requires `set -o errtrace`</span>
__b3bp_err_report<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local</span> error_code
    <span class="nv">error_code</span><span class="o">=</span><span class="si">${</span><span class="p">?</span><span class="si">}</span>
    error <span class="s2">&#34;Error in </span><span class="si">${</span><span class="nv">__file</span><span class="si">}</span><span class="s2"> in function </span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2"> on line </span><span class="si">${</span><span class="nv">2</span><span class="si">}</span><span class="s2">&#34;</span>
    <span class="nb">exit</span> <span class="si">${</span><span class="nv">error_code</span><span class="si">}</span>
<span class="o">}</span>
<span class="c1"># Uncomment the following line for always providing an error backtrace</span>
<span class="c1"># trap &#39;__b3bp_err_report &#34;${FUNCNAME:-.}&#34; ${LINENO}&#39; ERR</span>


<span class="c1">### Command-line argument switches (like -d for debugmode, -h for showing helppage)</span>
<span class="c1">##############################################################################</span>

<span class="c1"># debug mode</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">arg_d</span><span class="p">:?</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;1&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">set</span> -o xtrace
  <span class="nv">LOG_LEVEL</span><span class="o">=</span><span class="s2">&#34;7&#34;</span>
  <span class="c1"># Enable error backtracing</span>
  <span class="nb">trap</span> <span class="s1">&#39;__b3bp_err_report &#34;${FUNCNAME:-.}&#34; ${LINENO}&#39;</span> ERR
<span class="k">fi</span>

<span class="c1"># verbose mode</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">arg_v</span><span class="p">:?</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;1&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">set</span> -o verbose
<span class="k">fi</span>

<span class="c1"># no color mode</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">arg_n</span><span class="p">:?</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;1&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nv">NO_COLOR</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>
<span class="k">fi</span>

<span class="c1"># help mode</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">arg_h</span><span class="p">:?</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;1&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="c1"># Help exists with code 1</span>
  <span class="nb">help</span> <span class="s2">&#34;Help using </span><span class="si">${</span><span class="nv">0</span><span class="si">}</span><span class="s2">&#34;</span>
<span class="k">fi</span>

<span class="k">function</span> yesno<span class="o">()</span> <span class="o">{</span>
    <span class="nb">read</span> -p <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2"> &#34;</span> YN

    <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$YN</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;y&#34;</span> <span class="o">]</span>
<span class="o">}</span>

<span class="k">function</span> not_installed_force<span class="o">()</span> <span class="o">{</span>
    <span class="nv">app_name</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span>

    <span class="k">if</span> ! <span class="nb">command</span> -v <span class="nv">$1</span> &gt; /dev/null<span class="p">;</span> <span class="k">then</span>
    info <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2"> not found&#34;</span>
    <span class="k">return</span> <span class="m">0</span>
    <span class="k">else</span>
    info <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2"> installed&#34;</span>
    <span class="k">return</span> <span class="m">1</span>
    <span class="k">fi</span>
<span class="o">}</span>

<span class="k">function</span> not_installed<span class="o">()</span> <span class="o">{</span>
    <span class="nv">app_name</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span>

    <span class="k">if</span> ! <span class="nb">command</span> -v <span class="nv">$1</span> &gt; /dev/null<span class="p">;</span> <span class="k">then</span>
    info <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2"> not found&#34;</span>
    
    yesno <span class="s2">&#34;Install </span><span class="nv">$1</span><span class="s2">?&#34;</span>
    <span class="k">else</span>
    info <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2"> installed&#34;</span>
    <span class="k">return</span> <span class="m">1</span>
    <span class="k">fi</span>
<span class="o">}</span>

<span class="nv">UPDATED</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
<span class="k">function</span> update_check <span class="o">{</span>
    <span class="k">if</span> <span class="nb">test</span> -z <span class="s2">&#34;</span><span class="nv">$UPDATED</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">then</span>
    info <span class="s2">&#34;Running apt-get update&#34;</span>
    sudo apt-get update
    <span class="k">fi</span>

    <span class="nv">UPDATED</span><span class="o">=</span><span class="m">1</span>
<span class="o">}</span>

<span class="k">function</span> install_application <span class="o">{</span>
    update_check
    sudo apt-get install -y <span class="nv">$1</span>
<span class="o">}</span>

<span class="k">function</span> install_docker <span class="o">{</span>
    info <span class="s2">&#34;Installing Docker...&#34;</span>
    update_check

    sudo apt-get install -y <span class="se">\
</span><span class="se"></span>  apt-transport-https <span class="se">\
</span><span class="se"></span>  ca-certificates <span class="se">\
</span><span class="se"></span>  curl <span class="se">\
</span><span class="se"></span>  gnupg2 <span class="se">\
</span><span class="se"></span>  software-properties-common

    info <span class="s2">&#34;Adding gpg key for docker repository&#34;</span>
    
    <span class="c1"># Add the gpg key if it;s not there</span>
    curl -fsSL https://download.docker.com/linux/debian/gpg <span class="p">|</span> sudo apt-key add -

    <span class="c1"># Add the docker repository</span>
    sudo add-apt-repository <span class="se">\
</span><span class="se"></span>  <span class="s2">&#34;deb [arch=amd64] https://download.docker.com/linux/debian \
</span><span class="s2">     </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> \
</span><span class="s2">     stable&#34;</span>

    info <span class="s2">&#34;Installing docker-ce&#34;</span>
    <span class="c1"># Update and add docker-ce</span>
    sudo apt-get update
    sudo apt-get install -y docker-ce

    info <span class="s2">&#34;Installing docker-compose&#34;</span>
    <span class="c1"># Install docker-compose</span>
    sudo curl -L <span class="s2">&#34;https://github.com/docker/compose/releases/download/1.24.0/docker-compose-</span><span class="k">$(</span>uname -s<span class="k">)</span><span class="s2">-</span><span class="k">$(</span>uname -m<span class="k">)</span><span class="s2">&#34;</span> <span class="se">\
</span><span class="se"></span>  -o /usr/local/bin/docker-compose
    
    <span class="c1"># Add yourself to the docker group if you aren&#39;t already</span>
    <span class="c1"># sudo groupadd docker</span>
    sudo usermod -aG docker <span class="nv">$USER</span>
<span class="o">}</span>

<span class="k">function</span> install_rbenv<span class="o">()</span> <span class="o">{</span>
    <span class="nv">RESET_TERMINAL</span><span class="o">=</span><span class="m">1</span>
    update_check
    info Installing rbenv

    sudo apt-get install -y build-essential libssl-dev libreadline-dev zlib1g-dev

    <span class="nb">echo</span> <span class="s1">&#39;export PATH=$PATH:$HOME/.rbenv/bin&#39;</span> &gt;&gt; <span class="nv">$HOME</span>/.profile
    <span class="nb">echo</span> <span class="s1">&#39;eval &#34;$(rbenv init -)&#34;&#39;</span> &gt;&gt; <span class="nv">$HOME</span>/.profile
    <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$HOME</span>/.rbenv/bin

    <span class="o">(</span>
    curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-installer <span class="p">|</span> bash
    <span class="o">)</span>
    
    <span class="nb">eval</span> <span class="s2">&#34;</span><span class="k">$(</span>rbenv init -<span class="k">)</span><span class="s2">&#34;</span>
    
    warning <span class="s2">&#34;Be sure to logout and log back in, or source ~/.profile&#34;</span>
    <span class="nb">source</span> ~/.profile
    rbenv install <span class="m">2</span>.5.5
    rbenv global <span class="m">2</span>.5.5
<span class="o">}</span>

<span class="k">function</span> install_nvm<span class="o">()</span> <span class="o">{</span>
    <span class="nv">RESET_TERMINAL</span><span class="o">=</span><span class="m">1</span>
    info Installing nvm

    curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh <span class="p">|</span> <span class="o">(</span>bash<span class="o">)</span>

    <span class="nb">export</span> <span class="nv">NVM_DIR</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.config&#34;</span>
    <span class="o">[</span> -s <span class="s2">&#34;</span><span class="nv">$NVM_DIR</span><span class="s2">/nvm.sh&#34;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="se">\.</span> <span class="s2">&#34;</span><span class="nv">$NVM_DIR</span><span class="s2">/nvm.sh&#34;</span>  <span class="c1"># This loads nvm</span>
    <span class="o">[</span> -s <span class="s2">&#34;</span><span class="nv">$NVM_DIR</span><span class="s2">/bash_completion&#34;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="se">\.</span> <span class="s2">&#34;</span><span class="nv">$NVM_DIR</span><span class="s2">/bash_completion&#34;</span>  <span class="c1"># This loads nvm bash_completion</span>

    warning <span class="s2">&#34;Be sure to loging and log back in, or source ~/.bashrc&#34;</span>
    nvm install <span class="m">10</span>
    nvm global <span class="m">10</span>
<span class="o">}</span>

<span class="k">function</span> install_go<span class="o">()</span> <span class="o">{</span>
    <span class="nv">RESET_TERMINAL</span><span class="o">=</span><span class="m">1</span>
    info Installing go
    <span class="o">(</span>
    <span class="nb">cd</span> /tmp
    wget https://dl.google.com/go/go1.12.1.linux-amd64.tar.gz
    sudo tar -C /usr/local -xzf go1.12.1.linux-amd64.tar.gz
    <span class="nb">echo</span> <span class="s1">&#39;export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin&#39;</span> &gt;&gt; <span class="nv">$HOME</span>/.profile
    <span class="o">)</span>
    <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/usr/local/go/bin:<span class="nv">$HOME</span>/go/bin
    <span class="nb">source</span> ~/.profile
<span class="o">}</span>

<span class="k">function</span> install_hugo<span class="o">()</span> <span class="o">{</span>
    info Installing hugo
    update_check

    <span class="o">(</span>
    <span class="nv">HUGO_VERSION</span><span class="o">=</span><span class="m">0</span>.56.3
    <span class="nv">HUGO_FILENAME</span><span class="o">=</span>hugo_<span class="si">${</span><span class="nv">HUGO_VERSION</span><span class="si">}</span>_Linux-64bit.deb
    <span class="nb">cd</span> /tmp
    wget https://github.com/gohugoio/hugo/releases/download/v<span class="si">${</span><span class="nv">HUGO_VERSION</span><span class="si">}</span>/<span class="si">${</span><span class="nv">HUGO_FILENAME</span><span class="si">}</span>
    sudo apt install -u ./<span class="si">${</span><span class="nv">HUGO_FILENAME</span><span class="si">}</span>
    <span class="o">)</span>
    info <span class="k">$(</span>hugo version<span class="k">)</span>
<span class="o">}</span>

<span class="k">function</span> install_atom<span class="o">()</span> <span class="o">{</span>
    info Installing atom
    update_check
    
    <span class="o">(</span>
    <span class="nb">cd</span> /tmp
    sudo apt-get install -y wget
    wget https://atom.io/download/deb
    mv deb atom.deb
    sudo apt install -y ./atom.deb
    <span class="o">)</span>
<span class="o">}</span>

<span class="k">function</span> install_gcloud<span class="o">()</span> <span class="o">{</span>
    info Installing gcloud
    
    <span class="c1"># Create environment variable for correct distribution</span>
    <span class="nb">export</span> <span class="nv">CLOUD_SDK_REPO</span><span class="o">=</span><span class="s2">&#34;cloud-sdk-</span><span class="k">$(</span>lsb_release -c -s<span class="k">)</span><span class="s2">&#34;</span>

    <span class="c1"># Add the Cloud SDK distribution URI as a package source</span>
    <span class="nb">echo</span> <span class="s2">&#34;deb http://packages.cloud.google.com/apt </span><span class="nv">$CLOUD_SDK_REPO</span><span class="s2"> main&#34;</span> <span class="p">|</span> sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list

    <span class="c1"># Import the Google Cloud Platform public key</span>
    curl https://packages.cloud.google.com/apt/doc/apt-key.gpg <span class="p">|</span> sudo apt-key add -

    <span class="c1"># Update the package list and install the Cloud SDK</span>
    sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install -y google-cloud-sdk
<span class="o">}</span>


<span class="k">function</span> install_heroku<span class="o">()</span> <span class="o">{</span>
    info Installing heroku
    curl https://cli-assets.heroku.com/install-ubuntu.sh <span class="p">|</span> sh
<span class="o">}</span>

<span class="k">function</span> install_terraform<span class="o">()</span> <span class="o">{</span>
    info Installing terraform
    <span class="o">(</span>
    <span class="nb">cd</span> /tmp
    wget https://releases.hashicorp.com/terraform/0.12.18/terraform_0.12.18_linux_amd64.zip
    unzip terraform_0.12.18_linux_amd64.zip
    sudo mv terraform /usr/local/bin
    <span class="o">)</span>
<span class="o">}</span>

<span class="k">function</span> install_packer<span class="o">()</span> <span class="o">{</span>
    info Installing packer
    <span class="o">(</span>
    <span class="nb">cd</span> /tmp
    wget https://releases.hashicorp.com/packer/1.5.1/packer_1.5.1_linux_amd64.zip
    unzip packer_1.5.1_linux_amd64.zip
    sudo mv packer /usr/local/bin
    <span class="o">)</span>
<span class="o">}</span>

<span class="k">function</span> install_ansible <span class="o">{</span>
    info Installing ansible

    <span class="o">(</span>
    <span class="nb">cd</span> /tmp
    curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
    python get-pip.py --user
    <span class="nv">RESET_TERMINAL</span><span class="o">=</span><span class="m">1</span>
    info Adding .local/bin to the path, please <span class="nb">source</span> .profile
    <span class="nb">echo</span> <span class="s2">&#34;export PATH=</span><span class="nv">$HOME</span><span class="s2">/.local/bin:</span><span class="nv">$PATH</span><span class="s2">&#34;</span> &gt;&gt; ~/.profile
    <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$HOME</span>/.local/bin:<span class="nv">$PATH</span>
    pip install --user ansible
    <span class="o">)</span>
<span class="o">}</span>

<span class="k">function</span> install_steam<span class="o">()</span> <span class="o">{</span>
    info Installing steam
    update_check

    <span class="nb">echo</span> <span class="s1">&#39;deb http://httpredir.debian.org/debian/ jessie main contrib non-free&#39;</span> <span class="p">|</span> sudo tee -a /etc/apt/sources.list
    sudo dpkg --add-architecture i386
    sudo apt update
    sudo apt install -y steam
<span class="o">}</span>

<span class="c1">## Actual setup scripts</span>

info <span class="s2">&#34;Begin setup&#34;</span>

not_installed_force gcc <span class="o">&amp;&amp;</span> install_application <span class="s2">&#34;build-essential libssl-dev&#34;</span>

not_installed_force git <span class="o">&amp;&amp;</span> install_application git

<span class="k">if</span> ! git config --get user.email &gt; /dev/null<span class="p">;</span> <span class="k">then</span>
  <span class="nb">read</span> -p <span class="s2">&#34;Email Address (for git): &#34;</span> gitemail
  git config --global user.email <span class="s2">&#34;</span><span class="nv">$gitemail</span><span class="s2">&#34;</span>
<span class="k">fi</span>
<span class="nv">gitemail</span><span class="o">=</span><span class="k">$(</span>git config --get user.email<span class="k">)</span>
info <span class="s2">&#34;Git Email: </span><span class="nv">$gitemail</span><span class="s2">&#34;</span>

<span class="k">if</span> ! git config --get user.name &gt; /dev/null<span class="p">;</span> <span class="k">then</span>
  <span class="nb">read</span> -p <span class="s2">&#34;Full name (for git)    : &#34;</span> gitname
  git config --global user.name <span class="s2">&#34;</span><span class="nv">$gitname</span><span class="s2">&#34;</span>
<span class="k">fi</span>
<span class="nv">gitname</span><span class="o">=</span><span class="k">$(</span>git config --get user.name<span class="k">)</span>
info <span class="s2">&#34;Git Name: </span><span class="nv">$gitname</span><span class="s2">&#34;</span>

<span class="c1">## SSH</span>

<span class="k">if</span> <span class="o">[</span> ! -d ~/.ssh <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    mkdir -p ~/.ssh
<span class="k">fi</span>

<span class="k">if</span> <span class="nb">test</span> <span class="s2">&#34;700&#34;</span> !<span class="o">=</span> <span class="k">$(</span>stat -c %a ~/.ssh<span class="k">)</span><span class="p">;</span> <span class="k">then</span>
    info <span class="s2">&#34;Setting permissions for ~/.ssh&#34;</span>
    chmod <span class="m">700</span> ~/.ssh
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> ! -f ~/.ssh/id_rsa <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="k">if</span> yesno <span class="s2">&#34;Set up ~/.ssh/id_rsa?&#34;</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> Paste in your id_rsa and them press ^D
    mkdir -p ~/.ssh
    cat &gt; ~/.ssh/id_rsa
    <span class="nb">echo</span> Thank you.
    <span class="nb">echo</span>
  <span class="k">fi</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="nb">test</span> <span class="s2">&#34;600&#34;</span> !<span class="o">=</span> <span class="k">$(</span>stat -c %a ~/.ssh/id_rsa<span class="k">)</span><span class="p">;</span> <span class="k">then</span>
    info <span class="s2">&#34;Setting permissions for ~/.ssh/id_rsa&#34;</span>
    chmod <span class="m">600</span> ~/.ssh/id_rsa
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> ! -f ~/.ssh/id_rsa.pub <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="k">if</span> yesno <span class="s2">&#34;Set up ~/.ssh/id_rsa.pub?&#34;</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> Paste in your id_rsa.pub and them press ^D
    mkdir -p ~/.ssh
    cat &gt; ~/.ssh/id_rsa.pub
    <span class="nb">echo</span> Thank you.
    <span class="nb">echo</span>
  <span class="k">fi</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="nb">test</span> <span class="s2">&#34;600&#34;</span> !<span class="o">=</span> <span class="k">$(</span>stat -c %a ~/.ssh/id_rsa.pub<span class="k">)</span><span class="p">;</span> <span class="k">then</span>
    info <span class="s2">&#34;Setting permissions for ~/.ssh/id_rsa.pub&#34;</span>
    chmod <span class="m">600</span> ~/.ssh/id_rsa.pub
<span class="k">fi</span>

<span class="c1"># Applications</span>

not_installed emacs <span class="o">&amp;&amp;</span> install_application emacs25
not_installed tmux <span class="o">&amp;&amp;</span> install_application tmux
not_installed jq <span class="o">&amp;&amp;</span> install_application jq
not_installed ag <span class="o">&amp;&amp;</span> install_application silversearcher-ag
not_installed docker <span class="o">&amp;&amp;</span> install_docker
not_installed ruby <span class="o">&amp;&amp;</span> install_rbenv
not_installed node <span class="o">&amp;&amp;</span> install_nvm
not_installed go <span class="o">&amp;&amp;</span> install_go
not_installed hugo <span class="o">&amp;&amp;</span> install_hugo
not_installed heroku <span class="o">&amp;&amp;</span> install_heroku
not_installed terraform <span class="o">&amp;&amp;</span> install_terraform
not_installed packer <span class="o">&amp;&amp;</span> install_packer
not_installed ansible <span class="o">&amp;&amp;</span> install_ansible
not_installed atom <span class="o">&amp;&amp;</span> install_atom
not_installed gcloud <span class="o">&amp;&amp;</span> install_gcloud
not_installed steam <span class="o">&amp;&amp;</span> install_steam

<span class="c1"># Get workspace</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;wschenk&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    info Installng <span class="nb">local</span> stuff
    <span class="k">if</span> <span class="o">[</span> ! -d ~/willschenk.com <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    info Cloning my website
    git clone git@github.com:wschenk/willschenk.com.git
    <span class="k">fi</span>


    <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;:</span><span class="nv">$PATH</span><span class="s2">:&#34;</span> <span class="o">==</span> *<span class="s2">&#34;:</span><span class="nv">$HOME</span><span class="s2">/willschenk.com/bin:&#34;</span>* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&#34;Your path is correctly set&#34;</span>
    <span class="k">else</span>
    info Adding willschenk.com/bin to the path
    <span class="nb">echo</span> <span class="s2">&#34;export PATH=</span><span class="nv">$HOME</span><span class="s2">/willschenk.com/bin:</span><span class="nv">$PATH</span><span class="s2">&#34;</span> &gt;&gt; ~/.profile
    <span class="nb">source</span> ~/.profile
    <span class="nv">RESET_TERMINAL</span><span class="o">=</span><span class="m">1</span>
    <span class="k">fi</span>
<span class="k">fi</span></code></pre></div>

  </article>

  
</div>


  <div class="bg-light py-5">
    <div class="container">
      <h2 class="text-center">Read next</h2>

      <div class="row">
        <div class="col-md-6 text-center">
          
            Next Post:
            <a href="../../../articles/2019/terraform_with_digitalocean/">Terraform and Packer with Digital Ocean</a>
          
        </div>
        <div class="col-md-6 text-center">
          
            Previous Post:
            <a href="../../../articles/2019/setting_up_an_ipfs_node/">Setting up an IPFS Node</a>
          
        </div>
      </div>
    </div>
  </div>




<div class="container mt-5">
  <h2 class="text-center">See also</h2>
  <div class="row">
  	
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2019/setting_up_chromebook/">Setting up a chromebook for development</a></p>

        
          <p class="lead font-italic mb-0">Documenting my steps</p>
        
        <div class="font-weight-light mt-3">
          
          
            <p>I just switch my pixelbook back to the stable channel, and this is what I did to get back to developing on it.</p>
          
        </div>
        <a href="../../../articles/2019/setting_up_chromebook/" class="btn btn-primary">Read more</a>
      </div>
    
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2019/setting_up_ipfs_on_chromebook/">Setting up IPFS on a chromebook</a></p>

        
          <p class="lead font-italic mb-0">Connecting to the world</p>
        
        <div class="font-weight-light mt-3">
          
          
            <p>Lets look at how to run an ipfs node on a chromebook.  We are using the linux container for this, and in order to get the experience right we&rsquo;ll need to install some chrome extensions to make it work seamlessly.</p>
          
        </div>
        <a href="../../../articles/2019/setting_up_ipfs_on_chromebook/" class="btn btn-primary">Read more</a>
      </div>
    
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2017/getting_firebase_and_grpc_working_under_termux/">Getting firebase and grpc working undertermux</a></p>

        
        <div class="font-weight-light mt-3">
          
          
            <p>firebase depends on grpc, which isnt set to build right on the Chromebook. This is because node-pre-gyp, which is used to download precompiled binaries, is not setup correctly. In then uses node-gyp to compile the C++ bindings directly, which is also not setup correctly.
We are going to adjust the settings of node-gyp to make it compile things right under termux, and then we are going to tweak the grpc package itself in our local cache to make it build correctly.</p>
          
        </div>
        <a href="../../../articles/2017/getting_firebase_and_grpc_working_under_termux/" class="btn btn-primary">Read more</a>
      </div>
    
  </div>
</div>


<footer class="footer bg-dark text-light mt-3">
  <div class="container">
    <h2 class="py-5 font-weight-light my-0">Made in Brooklyn, NY.</h2>
  </div>
</footer>
</body>
</html>
