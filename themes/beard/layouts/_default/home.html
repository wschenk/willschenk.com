{{ define "main" }}

{{/* 1. Hero */}}
<section class="hero">
  <div class="container">
    <img src="/beard-hero.png" alt="Will Schenk" class="hero-image">
    <h1>{{ .Title }}</h1>
    <div class="tagline">
      {{ .Content }}
    </div>
  </div>
</section>

<hr class="decorative">

{{/* 2. Latest Post (any section) */}}
{{ range first 1 .Site.RegularPages.ByDate.Reverse }}
<section class="container latest-fragment">
  <p class="fragment-label">Latest</p>
  <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
  <p class="fragment-date">
    {{ .Date | time.Format ":date_long" }}
  </p>
  <div class="fragment-content">
    {{ .Content }}
  </div>
</section>
{{ end }}

<hr class="decorative">

{{/* 3. Recent Writing */}}
<section class="container">
  <h2>Recent Writing</h2>
  <div class="card-grid">
    {{ range first 12 .Site.RegularPages.ByDate.Reverse }}
      {{ partial "post-card.html" . }}
    {{ end }}
  </div>
  <p style="text-align: center; margin-top: var(--space-m);">
    <a href="/writing/">View all writing &rarr;</a>
  </p>
</section>

<hr class="decorative">

{{/* 4. Section Overview */}}
<section class="container">
  <h2>Sections</h2>
  <div class="section-grid">
    {{ $sections := slice "articles" "howto" "labnotes" "fragments" }}
    {{ range $sections }}
      {{ $sectionPages := where $.Site.RegularPages "Section" . }}
      {{ $latest := first 1 $sectionPages.ByDate.Reverse }}
      <a href="/{{ . }}/" class="section-card">
        <p class="section-name">{{ . | title }}</p>
        <p class="section-count">{{ len $sectionPages }} posts</p>
        {{ range $latest }}
          <p class="section-latest">{{ .Title }}</p>
        {{ end }}
      </a>
    {{ end }}
  </div>
</section>

{{ end }}
